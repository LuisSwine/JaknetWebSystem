<%- include('../../partials/head.ejs', {tituloPagina: 'PANORAMA DEL PROYECTO'}) %> 
<%- include('../../partials/linksNav.ejs') %> 
<%- include('../../partials/header.ejs', {user: user}) %> 

<script>

    window.onload = function ($){
        "use strict";
        //Sales chart
        var ctx = document.getElementById( "sales-chart" );
        ctx.height = 150;
        var myChart = new Chart( ctx, {
            type: 'line',
            data: {
                labels: [ "2010", "2011", "2012", "2013", "2014", "2015", "2016" ],
                type: 'line',
                defaultFontFamily: 'Montserrat',
                datasets: [ {
                    label: "Foods",
                    data: [ 0, 30, 10, 120, 50, 63, 10 ],
                    backgroundColor: 'transparent',
                    borderColor: 'rgba(220,53,69,0.75)',
                    borderWidth: 3,
                    pointStyle: 'circle',
                    pointRadius: 5,
                    pointBorderColor: 'transparent',
                    pointBackgroundColor: 'rgba(220,53,69,0.75)',
                        }, {
                    label: "Electronics",
                    data: [ 0, 50, 40, 80, 40, 79, 120 ],
                    backgroundColor: 'transparent',
                    borderColor: 'rgba(40,167,69,0.75)',
                    borderWidth: 3,
                    pointStyle: 'circle',
                    pointRadius: 5,
                    pointBorderColor: 'transparent',
                    pointBackgroundColor: 'rgba(40,167,69,0.75)',
                        } ]
            },
            options: {
                responsive: true,

                tooltips: {
                    mode: 'index',
                    titleFontSize: 12,
                    titleFontColor: '#000',
                    bodyFontColor: '#000',
                    backgroundColor: '#fff',
                    titleFontFamily: 'Montserrat',
                    bodyFontFamily: 'Montserrat',
                    cornerRadius: 3,
                    intersect: false,
                },
                legend: {
                    display: false,
                    labels: {
                        usePointStyle: true,
                        fontFamily: 'Montserrat',
                    },
                },
                scales: {
                    xAxes: [ {
                        display: true,
                        gridLines: {
                            display: false,
                            drawBorder: false
                        },
                        scaleLabel: {
                            display: false,
                            labelString: 'Month'
                        }
                            } ],
                    yAxes: [ {
                        display: true,
                        gridLines: {
                            display: false,
                            drawBorder: false
                        },
                        scaleLabel: {
                            display: true,
                            labelString: 'Value'
                        }
                            } ]
                },
                title: {
                    display: false,
                    text: 'Normal Legend'
                }
            }
        } );
    }


</script>

<div class="content-wrap">
    <div class="main">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-8 p-r-0 title-margin-right">
                    <div class="page-header">
                        <div class="page-title">
                            <h1>Panorama del proyecto: <%= proyecto[0].nombre %></h1>
                        </div>
                    </div>
                </div>
                <!-- /# column -->
                <div class="col-lg-4 p-l-0 title-margin-left">
                    <div class="page-header">
                        <div class="page-title">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
                                <!-- <% //if(flag == 1){%>
                                    <li class="breadcrumb-item"><a href="/clientes/administrar?cliente=<%//= cliente %>">Cliente</a></li>
                                <%//}else if(flag == 2){%>
                                    <li class="breadcrumb-item"><a href="/ubicaciones/perfil?ubicacion=<%//= ubicacion %>&cliente=<%//= cliente %>&flag=1">Ubicacion</a></li>
                                <%//}else if(flag == 3){%>
                                    <li class="breadcrumb-item"><a href="/ubicaciones/perfil?ubicacion=<%//= ubicacion %>&flag=0">Ubicacion</a></li>
                                <%//}else if(flag == 0){%>
                                    <li class="breadcrumb-item"><a href="/proyectos/administrar">Proyectos</a></li>
                                <%//}else if(flag == 4){%>
                                    <li class="breadcrumb-item"><a href="/misProyectos?folio=<%= user.folio %>">Proyectos</a></li>
                                <%//} %> -->
                                <li class="breadcrumb-item active">Viaticos</li>
                            </ol>
                        </div>
                    </div>
                </div>
                <!-- /# column -->
            </div>
            <section id="main-content">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="card bg-info">
                            <div class="stat-widget-six">
                                <div class="stat-icon">
                                    <i class="ti-world"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="text-left dib">
                                        <div class="stat-heading">Cliente</div>
                                        <div class="stat-text">Henkel</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card bg-success">
                            <div class="stat-widget-six">
                                <div class="stat-icon">
                                    <i class="ti-location-pin"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="text-left dib">
                                        <div class="stat-heading">Ubicacion</div>
                                        <div class="stat-text">Toluca Laundry</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-3">
                        <div class="card" onclick="">
                            <div class="stat-widget-one">
                                <div class="stat-icon dib">
                                    <i class="ti-money color-primary border-primary"></i>
                                </div>
                                <div class="stat-content dib">
                                    <div class="stat-text">PRESUPUESTO</div>
                                    <div class="stat-digit">$541.69</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="card">
                            <div class="stat-widget-one">
                                <div class="stat-icon dib">
                                    <i class="ti-money color-warning border-warning"></i>
                                </div>
                                <div class="stat-content dib">
                                    <div class="stat-text">VIATICOS</div>
                                    <div class="stat-digit">$852.41</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="card">
                            <div class="stat-widget-one">
                                <div class="stat-icon dib">
                                    <i class="ti-money color-danger border-danger"></i>
                                </div>
                                <div class="stat-content dib">
                                    <div class="stat-text">EGRESOS</div>
                                    <div class="stat-digit">$520.32</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="card">
                            <div class="stat-widget-one">
                                <div class="stat-icon dib">
                                    <i class="ti-money color-success border-success"></i>
                                </div>
                                <div class="stat-content dib">
                                    <div class="stat-text">INGRESOS</div>
                                    <div class="stat-digit">$563.32</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-title">
                                <h4>Yearly Sales </h4>
                            </div>
                            <div class="sales-chart">
                                <canvas id="sales-chart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-title">
                                <h4>Yearly Sales </h4>
                            </div>
                            <div class="sales-chart">
                                <canvas id="sales-chart1"></canvas>
                            </div>
                        </div>
                    </div>
                    
                  </div>
                <div class="row">
                    
                </div>
            </section>
        </div>
    </div>
</div>

<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    function showDesc(descripcion){
        Swal.fire({
            icon: 'info',
            title: 'Descripcion',
            text: `${descripcion}`,
        })
    }
    function confirmDeleteDeposito(deposito, clave, bene, monto, proyecto, ubicacion, cliente, flag, permisos){
        Swal.fire({
            title: '¿ESTAS SEGURO?',
            text: `Se eliminará el deposito ${deposito} (si el deposito ya esta comprobado no se podrá eliminar)`,
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Elimiar'
            }).then((result) => {
            if (result.isConfirmed) {
                const ruta = `eliminar_deposito?deposito=${deposito}&clave=${clave}&bene=${bene}&monto=${monto}&proyecto=${proyecto}&ubicacion=${ubicacion}&cliente=${cliente}&flag=${flag}&permisos=${permisos}`
                window.location = ruta
            }
        })
    }
    function confirmDeleteComprobacion(comprobante, emisor, monto, proyecto, ubicacion, cliente, flag, permisos){
        Swal.fire({
            title: '¿ESTAS SEGURO?',
            text: `Se eliminará el comprobante ${comprobante} (El dinero de la comprobacion se le reembolsará al emisor)`,
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Elimiar'
            }).then((result) => {
            if (result.isConfirmed) {
                const ruta = `eliminar_comprobante?comprobante=${comprobante}&emisor=${emisor}&monto=${monto}&proyecto=${proyecto}&ubicacion=${ubicacion}&cliente=${cliente}&flag=${flag}&permisos=${permisos}`
                window.location = ruta
            }
        })
    }
    function definePresupuesto(proyecto, cliente, ubicacion, flag, permisos){
        Swal.fire({
            title: 'DEFINIR O REDEFINIR PRESUPUESTO DEL PROYECTO',
            input: 'text',
            icon: 'info',
            inputLabel: 'Establecer monto efectivo destinado a viaticos durante el proyecto',
            showCancelButton: true,
            inputValidator: (value) => {
                if (!value) {
                    return 'Tienes que escribir algo'
                }else{
                    const ruta = `definir_presupuesto?proyecto=${proyecto}&presupuesto=${value}&cliente=${cliente}&ubicacion=${ubicacion}&flag=${flag}&permisos=${permisos}`;
                    window.location = ruta
                }
            }
        })
    }
</script>

<%- include('../../partials/scriptsNav.ejs') %> 
<%- include('../../partials/dataTableJS.ejs') %> 
<%- include('../../partials/footer.ejs') %> 